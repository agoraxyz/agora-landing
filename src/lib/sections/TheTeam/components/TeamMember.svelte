<script>
  import { TwitterLogo, GithubLogo } from 'phosphor-svelte';

  export let advisor = false;
  export let photo; // WEBP image
  export let photoPng; // PNG fallback image
  export let name;
  export let label;
  export let twitter = null;
  export let github = null;
  export let about = null;
</script>

<div class="group flex flex-col">
  <div class="mb-2 flex h-52 max-h-52 flex-col items-end lg:h-64">
    {#if about}
      <div class="group relative h-52 w-full overflow-hidden lg:h-64">
        <picture
          class="absolute left-0 bottom-0 h-full w-full object-contain object-bottom transition-all duration-500 group-focus-within:-left-full group-focus-within:opacity-0 group-hover:-left-full group-hover:opacity-0"
        >
          <source srcset={photo} type="image/webp" />
          <source srcset={photoPng} type="image/png" />
          <img src={photoPng} alt={name} class="max-h-full" />
        </picture>
        <div
          class="absolute -right-full bottom-0 h-full w-full text-agora-white opacity-0 transition-all duration-500 group-focus-within:right-0 group-focus-within:opacity-100 group-hover:right-0 group-hover:opacity-100"
        >
          <p>{about}</p>
        </div>
      </div>
    {:else}
      <picture class="w-full h-full object-contain object-bottom">
        <source srcset={photo} type="image/webp" />
        <source srcset={photoPng} type="image/png" />
        <img src={photoPng} alt={name} class="max-h-full" />
      </picture>
    {/if}
  </div>
  <div class="relative flex flex-col">
    <span
      class={`relative left-1/2 inline-block max-w-max text-agora-pink-light text-lg lg:text-xl font-bold tracking-tight font-display transition-all duration-500 -translate-x-1/2 ${
        (twitter || github) &&
        'group-hover:left-0 group-focus-within:left-0 group-hover:-translate-x-0 group-focus-within:-translate-x-0'
      }`}
    >
      {name}
    </span>
    <span
      class={`relative left-1/2 inline-block max-w-max text-agora-white font-display text-sm lg:text-base font-light transition-all duration-500 -translate-x-1/2 ${
        (twitter || github) &&
        'group-hover:left-0 group-focus-within:left-0 group-hover:-translate-x-0 group-focus-within:-translate-x-0'
      } delay-100`}
    >
      {label}
    </span>
    <div
      class={`absolute inset-y-0 right-1 flex flex-col space-y-1 justify-center ${
        advisor ? 'text-agora-purple' : 'text-agora-blue-medium'
      }`}
    >
      {#if twitter || github}
        <div
          class={`absolute inset-y-0 -right-4 group-hover:right-0 group-focus-within:right-0 w-10 bg-gradient-to-l ${
            advisor
              ? 'from-agora-purple  via-agora-purple'
              : 'from-agora-blue-medium  via-agora-blue-medium'
          } opacity-0 group-hover:opacity-100 group-focus-within:opacity-100 transition-all duration-500`}
        />
      {/if}
      {#if twitter}
        <a
          href={twitter}
          target="_blank"
          rel="noopener"
          alt={`${name} - Twitter`}
          class="relative -right-4 flex h-5 w-5 items-center justify-center rounded-sm bg-white opacity-0 transition-all duration-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-300 group-focus-within:right-0 group-focus-within:opacity-100 group-hover:right-0 group-hover:opacity-100"
        >
          <TwitterLogo />
        </a>
      {/if}
      {#if github}
        <a
          href={github}
          target="_blank"
          rel="noopener"
          alt={`${name} - Github`}
          class="relative -right-4 flex h-5 w-5 items-center justify-center rounded-sm bg-white opacity-0 transition-all delay-100 duration-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-300 group-focus-within:right-0 group-focus-within:opacity-100 group-hover:right-0 group-hover:opacity-100"
        >
          <GithubLogo />
        </a>
      {/if}
    </div>
  </div>
</div>
